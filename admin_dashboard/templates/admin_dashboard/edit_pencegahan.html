{% extends 'admin_dashboard/base.html' %}
{% load static %}

{% block title %}Edit Data Pencegahan - AgroGuard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'admin_dashboard/css/edit_hama.css' %}">
{% endblock %}

{% block content %}
<div class="form-container">
  <h2><i class="fas fa-edit"></i> Edit Data Pencegahan</h2>

  {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  {% endif %}

  <form method="POST">
    {% csrf_token %}
    
    <div class="form-group">
      <label>Jenis Hama <span class="required">*</span></label>
      <select name="jenis_hama" required>
        <option value="">-- Pilih Jenis Hama --</option>
        {% for hama in hama_list %}
        <option value="{{ hama.id }}" {% if hama.id == pencegahan.jenis_hama.id %}selected{% endif %}>
          {{ hama.nama }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label>Judul Pencegahan <span class="required">*</span></label>
      <input type="text" name="judul" value="{{ pencegahan.judul }}" required>
    </div>

    <div class="form-group">
      <label>Sumber <span class="required">*</span></label>
      <input type="url" name="sumber" value="{{ pencegahan.sumber }}" required>
    </div>

    <div class="form-group">
      <label>Deskripsi</label>
      <textarea name="deskripsi" rows="5">{{ pencegahan.deskripsi }}</textarea>
    </div>

    <div class="form-group">
      <label>Status</label>
      <select name="status">
        <option value="aktif" {% if pencegahan.status == 'aktif' %}selected{% endif %}>Aktif</option>
        <option value="pending" {% if pencegahan.status == 'pending' %}selected{% endif %}>Pending</option>
        <option value="selesai" {% if pencegahan.status == 'selesai' %}selected{% endif %}>Selesai</option>
      </select>
    </div>

    <div class="button-group">
      <button type="submit" class="btn-update">
        <i class="fas fa-save"></i> Update
      </button>
      <a href="{% url 'admin_dashboard:data_pencegahan' %}" class="btn-batal">
        <i class="fas fa-times"></i> Batal
      </a>
    </div>
  </form>
</div>
{% endblock %}