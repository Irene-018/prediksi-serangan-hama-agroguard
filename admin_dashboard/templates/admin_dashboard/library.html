{% extends 'admin_dashboard/base.html' %}
{% load static %}

{% block title %}Library Pencegahan Hama - AgroGuard{% endblock %}
{% block page_title %}Halaman Library ADMIN{% endblock %}

{% block content %}
<!-- Header -->
<div class="header">
    <div class="header-title">
        <h1>Library Pencegahan Hama</h1>
        <p class="header-subtitle">Selamat datang AgroAdmin</p>
    </div>
    <div class="user-profile">
        <span class="user-name">{{ current_user.get_full_name|default:current_user.username }}</span>
        <div class="user-avatar">{{ current_user.username.0|upper }}</div>
    </div>
</div>

<!-- Add Button -->
<div class="library-header">
    <a href="{% url 'admin_dashboard:library_create' %}" class="add-btn">
        <span>+</span>
        <span>Tambahkan Pencegahan</span>
    </a>
</div>

<!-- Table -->
<div class="library-table">
    <table>
        <thead>
            <tr>
                <th>Jenis Hama</th>
                <th>Judul</th>
                <th>Sumber</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for pencegahan in pencegahan_list %}
            <tr>
                <td>{{ pencegahan.jenis_hama.nama }}</td>
                <td>{{ pencegahan.judul }}</td>
                <td>
                    <a href="{{ pencegahan.sumber }}" target="_blank" style="color: #4A6B4D; text-decoration: none;">
                        {{ pencegahan.sumber|truncatechars:50 }}
                    </a>
                </td>
                <td>
                    <div class="action-buttons">
                        <a href="{% url 'admin_dashboard:library_edit' pencegahan.id %}" class="btn btn-edit">Edit</a>
                        <form method="post" action="{% url 'admin_dashboard:library_delete' pencegahan.id %}" style="display: inline;" onsubmit="return confirm('Apakah Anda yakin ingin menghapus data ini?');">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-delete">Hapus</button>
                        </form>
                        <a href="{% url 'admin_dashboard:library_detail' pencegahan.id %}" class="btn btn-detail">Detail</a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align: center; padding: 40px; color: #999;">
                    Belum ada data pencegahan hama. Klik tombol "Tambahkan Pencegahan" untuk menambah data.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}